import './App.css'
import { Link, Outlet, useLocation } from 'react-router-dom'
import { useAuth } from './context/AuthContext'

function App() {
  const { token, setToken } = useAuth()
  const location = useLocation()

  function onQuit(e) {
    e.preventDefault()
    setToken('')
    window.location.replace('/auth/sign-in')
  }

  const isSignIn = location.pathname.startsWith('/auth')

  const title = (() => {
    if (location.pathname.startsWith('/menu')) return 'Меню'
    if (location.pathname.startsWith('/basket')) return 'Корзина'
    if (location.pathname.startsWith('/settings')) return 'Настройки'
    return 'Личный кабинет'
  })()

  return (
    <div className="main_container">
      <header className={isSignIn ? 'header_sign_in' : ''}>
        <div className="head_right_sapce"></div>
        <p className="head">{title}</p>
        <div className="head_right_sapce"></div>
      </header>

      <main>
        <Outlet />
      </main>

      <div className="main_container_index"></div>
      <div className="footer_per"></div>
      <footer>
        <nav>
          <div className="nav_icon">
            <Link to="/">
              <svg className="munu_b_lk" width="27" height="30" viewBox="0 0 27 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13.5 13.1946C14.2687 13.1946 15.0298 13.0392 15.74 12.7373C16.4502 12.4354 17.0955 11.9929 17.639 11.435C18.1825 10.8772 18.6137 10.2149 18.9079 9.48609C19.202 8.75723 19.3534 7.97605 19.3534 7.18714C19.3534 6.39823 19.202 5.61704 18.9079 4.88819C18.6137 4.15933 18.1825 3.49707 17.639 2.93923C17.0955 2.38139 16.4502 1.93888 15.74 1.63698C15.0298 1.33507 14.2687 1.17969 13.5 1.17969C11.9476 1.17969 10.4587 1.81261 9.36102 2.93923C8.26329 4.06584 7.64659 5.59386 7.64659 7.18714C7.64659 8.78041 8.26329 10.3084 9.36102 11.435C10.4587 12.5617 11.9476 13.1946 13.5 13.1946Z" strokeLinecap="round" strokeLinejoin="round" fill="#77ae50"/>
                <path d="M0.957001 27.612V28.6419H26.0431V27.612C26.0431 23.7672 26.0431 21.8449 25.3139 20.3756C24.6725 19.0838 23.6492 18.0335 22.3905 17.3753C20.959 16.627 19.0859 16.627 15.3397 16.627H11.6604C7.9142 16.627 6.04111 16.627 4.60953 17.3753C3.35085 18.0335 2.32752 19.0838 1.68617 20.3756C0.957001 21.8449 0.957001 23.7672 0.957001 27.612Z" strokeLinecap="round" strokeLinejoin="round" fill="#77ae50"/>
              </svg>
            </Link>
          </div>
          <div className="nav_icon">
            <Link to="/interesting">
              <svg width="22" height="21" viewBox="0 0 22 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11.9721 1.60508L11.9722 1.60513L20.7051 8.39643C20.7051 8.39645 20.7051 8.39646 20.7051 8.39647C21.1137 8.7151 20.8882 9.36876 20.3718 9.36876H19.3333H18.8333V9.86876V18.2021C18.8333 18.622 18.6665 19.0247 18.3695 19.3217C18.0726 19.6186 17.6699 19.7854 17.25 19.7854H4.74997C4.33004 19.7854 3.92731 19.6186 3.63038 19.3217C3.33345 19.0247 3.16663 18.622 3.16663 18.2021V9.86876V9.36876H2.66663H1.62809C1.1111 9.36876 0.887154 8.71465 1.29447 8.39779L10.0277 1.60617L10.0688 1.57427C10.339 1.37774 10.6649 1.27148 11 1.27148C11.3521 1.27148 11.6942 1.38887 11.9721 1.60508Z" stroke="#9A9A9A"/>
              </svg>
            </Link>
          </div>
          <div className="nav_icon">
            <Link to="/menu">
              <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14.6978 8.5585L15 8.78775L15.3022 8.5585C16.9281 7.32506 19.3362 6.84766 21.6458 6.84766C23.355 6.84766 25.1394 7.10803 26.6006 7.75837C27.3146 8.08164 27.7796 8.76814 27.7796 9.53766V23.1677C27.7796 24.4311 26.6074 25.3418 25.4096 25.0281L25.4065 25.0273C24.1759 24.7134 22.8771 24.5768 21.6338 24.5768C19.7056 24.5768 17.6141 24.8843 15.9001 25.7413L15.8971 25.7428C15.3278 26.0323 14.6732 26.034 14.0878 25.7413L14.0851 25.7399C12.3741 24.8972 10.285 24.5768 8.35418 24.5768C7.11106 24.5768 5.81237 24.7134 4.58193 25.0272C3.37938 25.3326 2.20834 24.4165 2.20834 23.1677V9.53766C2.20834 8.76839 2.67303 8.0821 3.38661 7.75869C4.86069 7.10784 6.64569 6.84766 8.35418 6.84766C10.6638 6.84766 13.0719 7.32506 14.6978 8.5585ZM24.3333 23.4054L24.3377 23.4062C25.3752 23.5903 26.375 22.82 26.375 21.7297V10.2868C26.375 9.47659 25.7933 8.78358 25.015 8.61417C23.9253 8.37618 22.7897 8.26432 21.6458 8.26432C20.5632 8.26432 19.2644 8.46994 18.0338 8.80276C16.8054 9.13497 15.6061 9.60438 14.7336 10.1537L14.5 10.3008V10.5768V24.4847V25.3904L15.2664 24.9079C16.0252 24.4301 17.1217 23.9933 18.2949 23.676C19.4658 23.3593 20.6743 23.1722 21.6458 23.1722C22.5511 23.1722 23.4623 23.2428 24.3333 23.4054ZM25.875 21.7297C25.875 22.491 25.1742 23.0468 24.425 22.9139L24.9083 9.10266C25.4642 9.22349 25.875 9.71891 25.875 10.2868V21.7297Z" stroke="#B0B0B0"/>
                <path d="M17.0118 13.4362L17.0119 13.4362L17.0089 13.4272C16.9397 13.2196 17.0613 12.989 17.2616 12.9274L17.2616 12.9274L17.269 12.925C19.0505 12.3466 21.3807 12.1556 23.5322 12.4022C23.7627 12.4311 23.9181 12.6372 23.8924 12.8481C23.8642 13.0795 23.6577 13.2356 23.4464 13.2098L23.4441 13.2096C21.4418 12.9747 19.2497 13.1541 17.5592 13.6881C17.5439 13.6904 17.5296 13.6927 17.5165 13.6949C17.502 13.6973 17.4914 13.6991 17.4819 13.7007C17.4704 13.7026 17.4605 13.7043 17.4473 13.7064C17.4059 13.7131 17.3932 13.7136 17.3925 13.7136C17.3925 13.7136 17.3925 13.7136 17.3925 13.7136C17.2162 13.7136 17.065 13.6063 17.0118 13.4362ZM17.0118 16.6503L17.0119 16.6503L17.0089 16.6414C16.9397 16.4338 17.0613 16.2032 17.2616 16.1415L17.2616 16.1416L17.2699 16.1389C19.0384 15.561 21.3802 15.3698 23.5322 15.6164C23.7627 15.6453 23.9181 15.8514 23.8924 16.0623C23.8642 16.2937 23.6577 16.4498 23.4464 16.424L23.4441 16.4237C21.432 16.1877 19.2282 16.37 17.5344 16.9101C17.4871 16.9212 17.4387 16.9271 17.3901 16.9278C17.2149 16.9269 17.0648 16.8197 17.0118 16.6503ZM17.0118 19.8645L17.0119 19.8645L17.0089 19.8555C16.9397 19.6479 17.0613 19.4173 17.2616 19.3557L17.2616 19.3558L17.2699 19.3531C19.0384 18.7751 21.3802 18.5839 23.5322 18.8306C23.7627 18.8595 23.9181 19.0655 23.8924 19.2765C23.8657 19.4952 23.6679 19.6575 23.4384 19.6372C21.4278 19.4022 19.2266 19.5847 17.5344 20.1243C17.4871 20.1354 17.4388 20.1413 17.3902 20.142C17.2149 20.141 17.0648 20.0339 17.0118 19.8645Z" stroke="#B0B0B0"/>
              </svg>
            </Link>
          </div>
          <div className="nav_icon">
            <Link to="/basket">
              <svg width="26" height="21" viewBox="0 0 26 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1.17431 9.24212L1.16948 9.22576L1.16452 9.21237C1.16514 9.21404 1.16549 9.21489 1.16561 9.21486C1.16638 9.21467 1.15821 9.17911 1.15638 9.09376C1.15444 9.00384 1.16009 8.89324 1.17357 8.77959C1.18711 8.66542 1.20716 8.55994 1.22997 8.47853C1.24552 8.42301 1.25753 8.39629 1.26064 8.38891C1.3653 8.2703 1.53313 8.19853 1.76835 8.16788C1.95049 8.14415 2.10171 8.14984 2.24963 8.1554C2.31319 8.15779 2.37615 8.16016 2.44068 8.16016H7.09372H7.35471L7.50393 7.94604L12.1915 1.22002L12.1962 1.21326L12.2007 1.20634C12.2482 1.13315 12.2928 1.06583 12.3407 1.00768C12.3921 0.945162 12.42 0.927475 12.4198 0.92756C12.4757 0.897663 12.5293 0.863011 12.5631 0.841158C12.5682 0.837829 12.5729 0.834796 12.5771 0.832122C12.6152 0.807661 12.6377 0.79439 12.6592 0.784038C12.6895 0.769475 12.7431 0.74788 12.8648 0.74805L12.866 0.748049C13.0995 0.747784 13.2043 0.77878 13.2529 0.798059C13.2789 0.80838 13.3019 0.820496 13.3333 0.839429C13.3372 0.841778 13.3435 0.845688 13.3515 0.850678C13.3818 0.869507 13.4369 0.903723 13.4815 0.92756C13.4806 0.927118 13.4802 0.926886 13.4802 0.926923C13.48 0.927192 13.5019 0.942349 13.5439 0.996492C13.5808 1.04411 13.6118 1.09232 13.6507 1.15291C13.6615 1.16969 13.6728 1.18742 13.6851 1.20634L13.6904 1.21447L13.696 1.22238L18.4414 7.94841L18.5908 8.16016H18.85H23.6388C23.7053 8.16016 23.7894 8.15466 23.8453 8.151C23.8644 8.14976 23.8802 8.14872 23.8909 8.14819C23.9524 8.14516 23.9975 8.14604 24.0429 8.15314C24.1242 8.16585 24.2717 8.20866 24.5297 8.40743C24.7107 8.54682 24.7516 8.69107 24.7542 8.82843C24.7572 8.99206 24.7032 9.15076 24.6571 9.27513L24.6499 9.29453L24.6443 9.31446L21.8014 19.4901C21.7396 19.689 21.6277 19.8452 21.4545 19.9707C21.2757 20.0996 21.0871 20.1602 20.875 20.1602H5.12497C4.91292 20.1602 4.72432 20.0996 4.54561 19.9708C4.37139 19.8446 4.2592 19.6874 4.19754 19.487C4.19733 19.4863 4.19712 19.4856 4.19692 19.4849L1.17431 9.24212ZM9.41075 7.37556L8.86756 8.16016H9.82185H16.15H17.1091L16.5599 7.37385L13.3818 2.82384L12.97 2.23438L12.5608 2.82556L9.41075 7.37556Z" stroke="#9A9A9A"/>
              </svg>
            </Link>
      </div>
        </nav>
      </footer>
      </div>
  )
}

export default App
